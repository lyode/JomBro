<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    
    <title>JomBro - Challenge App</title>

    <style>
        /* ===== FLOATING GLASS INTERFACE ===== */
        :root {
            --safe-area-top: env(safe-area-inset-top, 20px);
            --safe-area-bottom: env(safe-area-inset-bottom, 20px);
            --glass-bg: rgba(15, 15, 30, 0.75);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-blur: blur(20px);
            --primary-glow: #00ffaa;
            --accent-glow: #66d9ff;
            --animation-speed: 0.4s;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-font-smoothing: antialiased;
            touch-action: manipulation;
        }

        html, body {
            height: 100vh;
            overflow: hidden;
            position: fixed;
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
        }

        /* ===== DEEP DARK BACKGROUND WITH PARTICLES ===== */
        body {
            background: radial-gradient(ellipse at center, #0a0a15 0%, #000000 70%);
            color: #ffffff;
            font-weight: 300;
        }

        /* ===== ANIMATED PARTICLE BACKGROUND ===== */
        .particle-field {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1;
            pointer-events: none;
            overflow: hidden;
        }

        .particle {
            position: absolute;
            width: 3px;
            height: 3px;
            background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
            border-radius: 50%;
            opacity: 0;
            animation: particleFloat 8s infinite ease-in-out;
        }

        .particle:nth-child(2n) {
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            animation-duration: 12s;
        }

        .particle:nth-child(3n) {
            width: 2px;
            height: 2px;
            animation-duration: 15s;
        }

        .particle:nth-child(4n) {
            background: radial-gradient(circle, #ffffff 0%, transparent 70%);
            animation-duration: 6s;
        }

        .particle:nth-child(5n) {
            width: 4px;
            height: 4px;
            animation-duration: 10s;
        }

        @keyframes particleFloat {
            0% {
                opacity: 0;
                transform: translateY(100vh) translateX(0) scale(0);
            }
            10% {
                opacity: 1;
                transform: translateY(80vh) translateX(20px) scale(1);
            }
            50% {
                opacity: 0.8;
                transform: translateY(50vh) translateX(-30px) scale(1.2);
            }
            90% {
                opacity: 0.3;
                transform: translateY(10vh) translateX(40px) scale(0.8);
            }
            100% {
                opacity: 0;
                transform: translateY(-10vh) translateX(0) scale(0);
            }
        }

        /* ===== BLINKING DOTS LAYER ===== */
        .blink-dots {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 2;
            pointer-events: none;
        }

        .blink-dot {
            position: absolute;
            width: 1px;
            height: 1px;
            background: #ffffff;
            border-radius: 50%;
            opacity: 0;
            animation: blink 3s infinite ease-in-out;
        }

        .blink-dot:nth-child(2n) {
            animation-delay: 1s;
            background: var(--primary-glow);
        }

        .blink-dot:nth-child(3n) {
            animation-delay: 2s;
            background: var(--accent-glow);
        }

        @keyframes blink {
            0%, 90% {
                opacity: 0;
                transform: scale(1);
            }
            45% {
                opacity: 1;
                transform: scale(1.5);
            }
        }

        /* ===== FLOATING GLASS CONTAINER ===== */
        .glass-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 100;
            display: flex;
            flex-direction: column;
            pointer-events: none;
        }

        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: var(--glass-blur);
            -webkit-backdrop-filter: var(--glass-blur);
            border: 1px solid var(--glass-border);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            pointer-events: auto;
            position: relative;
        }

        .glass-panel::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                transparent 30%, 
                transparent 70%, 
                rgba(255, 255, 255, 0.05) 100%);
            border-radius: inherit;
            pointer-events: none;
        }

        /* ===== FLOATING HEADER ===== */
        .floating-header {
            position: fixed;
            top: calc(var(--safe-area-top) + 20px);
            left: 20px;
            right: 20px;
            height: 60px;
            border-radius: 30px;
            z-index: 1000;
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transform: translateY(0);
            animation: floatIn 0.8s ease-out;
        }

        .logo {
            font-size: 24px;
            font-weight: 300;
            color: #ffffff;
            text-shadow: 0 0 20px var(--primary-glow);
            letter-spacing: 1px;
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .glass-button {
            width: 36px;
            height: 36px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.8);
            transition: all var(--animation-speed) ease;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .glass-button:hover, .glass-button:active {
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 170, 0.3);
        }

        /* ===== FLOATING PLAYER INFO ===== */
        .floating-player {
            position: fixed;
            top: calc(var(--safe-area-top) + 90px);
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            z-index: 950;
            text-align: center;
            font-size: 12px;
            min-width: 80px;
            animation: floatIn 0.8s ease-out 0.2s both;
        }

        .player-rank {
            color: var(--accent-glow);
            font-weight: 500;
            margin-bottom: 2px;
            text-shadow: 0 0 10px var(--accent-glow);
        }

        .player-tokens {
            color: var(--primary-glow);
            font-weight: 600;
            text-shadow: 0 0 10px var(--primary-glow);
        }

        /* ===== FLOATING CHALLENGE FEED ===== */
        .floating-feed {
            position: fixed;
            top: calc(var(--safe-area-top) + 160px);
            left: 20px;
            right: 20px;
            bottom: calc(100px + var(--safe-area-bottom));
            z-index: 100;
            border-radius: 24px;
            padding: 24px;
            overflow: hidden;
            animation: floatIn 0.8s ease-out 0.4s both;
        }

        .challenge-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .challenge-card {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 100%;
            padding: 0;
            display: flex;
            flex-direction: column;
            opacity: 0;
            transform: translateY(20px) scale(0.95);
            transition: all var(--animation-speed) ease;
        }

        .challenge-card.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            z-index: 10;
        }

        .challenge-content {
            background: rgba(10, 10, 20, 0.6);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 24px;
            height: 100%;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .challenge-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(0, 255, 170, 0.03) 0%, 
                transparent 50%, 
                rgba(102, 217, 255, 0.03) 100%);
            border-radius: inherit;
            pointer-events: none;
        }

        .challenge-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
        }

        .challenge-avatar {
            width: 40px;
            height: 40px;
            border-radius: 20px;
            background: linear-gradient(135deg, var(--primary-glow), var(--accent-glow));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            box-shadow: 0 0 20px rgba(0, 255, 170, 0.3);
        }

        .challenge-user {
            flex: 1;
        }

        .challenge-username {
            font-weight: 400;
            margin-bottom: 2px;
            color: rgba(255, 255, 255, 0.9);
        }

        .challenge-type {
            font-size: 10px;
            background: linear-gradient(90deg, var(--primary-glow), var(--accent-glow));
            color: #000;
            padding: 2px 8px;
            border-radius: 10px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .challenge-body {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .challenge-title {
            font-size: 22px;
            font-weight: 500;
            color: #ffffff;
            margin-bottom: 12px;
            line-height: 1.3;
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.2);
        }

        .challenge-description {
            font-size: 16px;
            line-height: 1.5;
            margin-bottom: 16px;
            color: rgba(255, 255, 255, 0.85);
        }

        .challenge-hashtags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .hashtag {
            font-size: 13px;
            color: var(--accent-glow);
            background: rgba(102, 217, 255, 0.1);
            padding: 4px 10px;
            border-radius: 12px;
            border: 1px solid rgba(102, 217, 255, 0.2);
        }

        .challenge-reward {
            background: linear-gradient(135deg, 
                rgba(0, 255, 170, 0.1) 0%, 
                rgba(102, 217, 255, 0.1) 100%);
            border: 1px solid rgba(0, 255, 170, 0.3);
            padding: 12px 16px;
            border-radius: 16px;
            text-align: center;
            margin-bottom: 20px;
            font-weight: 500;
            color: #ffffff;
            position: relative;
            z-index: 1;
        }

        .challenge-actions {
            display: flex;
            gap: 12px;
            position: relative;
            z-index: 1;
        }

        .glass-btn {
            flex: 1;
            padding: 14px 20px;
            border-radius: 18px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            border: none;
            transition: all var(--animation-speed) ease;
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .glass-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.1), 
                transparent);
            transition: left 0.5s ease;
        }

        .glass-btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: linear-gradient(135deg, 
                rgba(0, 255, 170, 0.2) 0%, 
                rgba(102, 217, 255, 0.2) 100%);
            border: 1px solid rgba(0, 255, 170, 0.4);
            color: #ffffff;
        }

        .btn-primary:hover, .btn-primary:active {
            background: linear-gradient(135deg, 
                rgba(0, 255, 170, 0.3) 0%, 
                rgba(102, 217, 255, 0.3) 100%);
            border-color: rgba(0, 255, 170, 0.6);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 255, 170, 0.2);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            color: rgba(255, 255, 255, 0.8);
        }

        .btn-secondary:hover, .btn-secondary:active {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.25);
            color: #ffffff;
            transform: translateY(-2px);
        }

        /* ===== FLOATING SIDE ACTIONS ===== */
        .floating-actions {
            position: fixed;
            right: 20px;
            bottom: calc(120px + var(--safe-area-bottom));
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 200;
            animation: floatIn 0.8s ease-out 0.6s both;
        }

        .action-glass {
            width: 48px;
            height: 48px;
            border-radius: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.8);
            transition: all var(--animation-speed) ease;
            background: rgba(10, 10, 20, 0.7);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .action-glass:hover, .action-glass:active {
            background: rgba(0, 255, 170, 0.15);
            border-color: rgba(0, 255, 170, 0.3);
            color: #ffffff;
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(0, 255, 170, 0.3);
        }

        .points-action {
            height: 60px;
            flex-direction: column;
            padding: 8px;
            background: rgba(0, 255, 170, 0.1);
            border-color: rgba(0, 255, 170, 0.2);
        }

        .points-number {
            font-size: 11px;
            font-weight: 600;
            line-height: 1;
            color: var(--primary-glow);
        }

        .points-icon {
            font-size: 14px;
            margin-top: 2px;
        }

        /* ===== FLOATING NAVIGATION ===== */
        .floating-nav {
            position: fixed;
            bottom: var(--safe-area-bottom);
            left: 20px;
            right: 20px;
            height: 70px;
            border-radius: 35px;
            z-index: 1000;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 12px 20px;
            animation: floatIn 0.8s ease-out 0.8s both;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px 12px;
            cursor: pointer;
            color: rgba(255, 255, 255, 0.6);
            font-size: 11px;
            font-weight: 400;
            transition: all var(--animation-speed) ease;
            border-radius: 16px;
            min-width: 50px;
        }

        .nav-item.active {
            color: #ffffff;
            background: rgba(0, 255, 170, 0.15);
            border: 1px solid rgba(0, 255, 170, 0.2);
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
            transition: all var(--animation-speed) ease;
        }

        .nav-item.active .nav-icon {
            transform: scale(1.1);
            text-shadow: 0 0 15px var(--primary-glow);
        }

        /* ===== FLOATING MODALS ===== */
        .glass-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 24px;
        }

        .glass-modal.show {
            display: flex;
            animation: modalFloat 0.4s ease-out;
        }

        .modal-glass {
            background: rgba(10, 10, 25, 0.85);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 24px;
            padding: 28px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            width: 100%;
            max-width: 400px;
            position: relative;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .modal-glass::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.05) 0%, 
                transparent 50%, 
                rgba(0, 255, 170, 0.03) 100%);
            border-radius: inherit;
            pointer-events: none;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 500;
            margin-bottom: 20px;
            text-align: center;
            color: #ffffff;
            position: relative;
            z-index: 1;
        }

        .form-group {
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 400;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }

        .glass-input {
            width: 100%;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            color: #ffffff;
            font-size: 16px;
            outline: none;
            transition: all var(--animation-speed) ease;
        }

        .glass-input:focus {
            border-color: rgba(0, 255, 170, 0.5);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 20px rgba(0, 255, 170, 0.1);
        }

        .glass-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        /* ===== FLOATING TOAST ===== */
        .floating-toast {
            position: fixed;
            top: calc(var(--safe-area-top) + 180px);
            left: 20px;
            right: 20px;
            padding: 12px 20px;
            border-radius: 16px;
            font-size: 14px;
            font-weight: 400;
            text-align: center;
            z-index: 4000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all var(--animation-speed) ease;
            background: rgba(10, 10, 25, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(0, 255, 170, 0.3);
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .floating-toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .floating-toast.error {
            border-color: rgba(255, 107, 107, 0.4);
            background: rgba(25, 10, 10, 0.9);
        }

        /* ===== RATING STARS ===== */
        .glass-stars {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 16px 0;
            position: relative;
            z-index: 1;
        }

        .glass-star {
            font-size: 24px;
            cursor: pointer;
            opacity: 0.3;
            transition: all 0.3s ease;
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.3));
        }

        .glass-star:hover, .glass-star.active {
            opacity: 1;
            transform: scale(1.1);
            filter: drop-shadow(0 0 15px rgba(255, 215, 0, 0.8));
        }

        /* ===== FLOATING PAGES ===== */
        .floating-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 2000;
            display: none;
            padding: var(--safe-area-top) 20px calc(var(--safe-area-bottom) + 20px) 20px;
            overflow-y: auto;
        }

        .floating-page.show {
            display: block;
            animation: pageSlide 0.5s ease-out;
        }

        .page-glass {
            background: rgba(5, 5, 15, 0.9);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 24px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .page-glass::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(0, 255, 170, 0.02) 0%, 
                transparent 50%, 
                rgba(102, 217, 255, 0.02) 100%);
            border-radius: inherit;
            pointer-events: none;
        }

        /* ===== ANIMATIONS ===== */
        @keyframes floatIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes modalFloat {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes pageSlide {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* ===== RESPONSIVE OPTIMIZATION ===== */
        @media screen and (max-width: 400px) {
            .floating-header {
                height: 56px;
                padding: 12px 20px;
            }
            
            .logo {
                font-size: 22px;
            }
            
            .glass-button {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .floating-feed {
                padding: 20px;
            }
            
            .challenge-content {
                padding: 20px;
            }
        }

        /* ===== PERFORMANCE OPTIMIZATIONS ===== */
        .challenge-card {
            will-change: transform, opacity;
            contain: layout style;
        }

        @media (prefers-reduced-motion: reduce) {
            .particle, .blink-dot {
                animation: none !important;
            }
            * {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Particle Field -->
    <div class="particle-field" id="particleField">
        <!-- Particles generated by JS -->
    </div>

    <!-- Blinking Dots Layer -->
    <div class="blink-dots" id="blinkDots">
        <!-- Blinking dots generated by JS -->
    </div>

    <!-- Floating Glass Interface -->
    <div class="glass-container">
        
        <!-- Floating Header -->
        <div class="floating-header glass-panel">
            <div class="logo">JomBro</div>
            <div style="display: flex; align-items: center; gap: 12px;">
                <div id="challengeCounter" style="background: rgba(0, 255, 170, 0.15); border: 1px solid rgba(0, 255, 170, 0.3); color: var(--primary-glow); padding: 4px 10px; border-radius: 12px; font-size: 11px; font-weight: 500;">
                    1/5
                </div>
                <div class="header-actions">
                    <div class="glass-button" onclick="showHelp()" title="Help">❓</div>
                    <div class="glass-button" onclick="showModal('create')" title="Create">➕</div>
                    <div class="glass-button" onclick="showModal('settings')" title="Settings">⚙️</div>
                </div>
            </div>
        </div>

        <!-- Floating Player Info -->
        <div class="floating-player glass-panel">
            <div class="player-rank" id="playerRank">Elite</div>
            <div class="player-tokens" id="playerTokens">🪙 15,247</div>
        </div>

        <!-- Floating Challenge Feed -->
        <div class="floating-feed glass-panel">
            <div class="challenge-container" id="challengeContainer">
                <!-- Challenge cards populated by JS -->
            </div>
        </div>

        <!-- Floating Side Actions -->
        <div class="floating-actions">
            <div class="action-glass points-action" onclick="likeChallenge()" title="Like">
                <div class="points-number" id="currentPoints">2.5K</div>
                <div class="points-icon">❤️</div>
            </div>
            <div class="action-glass" onclick="shareChallenge()" title="Share">📤</div>
            <div class="action-glass" onclick="bookmarkChallenge()" title="Bookmark">🔖</div>
        </div>

        <!-- Floating Navigation -->
        <div class="floating-nav glass-panel">
            <div class="nav-item active" onclick="navTo(this, 'home')">
                <div class="nav-icon">🏠</div>
                <div>Home</div>
            </div>
            <div class="nav-item" onclick="navTo(this, 'leaderboard')">
                <div class="nav-icon">🏆</div>
                <div>Ranks</div>
            </div>
            <div class="nav-item" onclick="navTo(this, 'create')">
                <div class="nav-icon">➕</div>
                <div>Create</div>
            </div>
            <div class="nav-item" onclick="navTo(this, 'profile')">
                <div class="nav-icon">👤</div>
                <div>Profile</div>
            </div>
        </div>
    </div>

    <!-- Floating Challenge Detail Page -->
    <div class="floating-page" id="challengePage">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
            <div class="glass-button" onclick="closePage()" style="width: 40px; height: 40px;">←</div>
            <div style="font-size: 18px; color: var(--primary-glow); font-weight: 500;">Challenge Details</div>
            <div style="width: 40px;"></div>
        </div>

        <div class="page-glass">
            <div style="position: relative; z-index: 1;">
                <div style="font-size: 22px; font-weight: 500; margin-bottom: 16px; color: #ffffff;" id="detailTitle">Challenge Title</div>
                <div style="font-size: 16px; line-height: 1.6; margin-bottom: 20px; color: rgba(255, 255, 255, 0.8);" id="detailDescription">Challenge description...</div>

                <div style="background: rgba(0, 255, 170, 0.05); border: 1px solid rgba(0, 255, 170, 0.2); border-radius: 12px; padding: 16px; margin-bottom: 20px;">
                    <h3 style="color: var(--primary-glow); margin-bottom: 12px; font-size: 16px; font-weight: 500;">📋 Requirements:</h3>
                    <ul id="requirementsList" style="list-style: none; padding: 0;">
                        <li style="padding: 4px 0; color: rgba(255, 255, 255, 0.8); position: relative; padding-left: 20px;">Complete the challenge</li>
                    </ul>
                </div>

                <div style="display: flex; gap: 12px; margin: 20px 0;">
                    <div style="flex: 1; text-align: center; padding: 12px; background: rgba(0, 255, 170, 0.1); border: 1px solid rgba(0, 255, 170, 0.2); border-radius: 12px;">
                        <div style="font-size: 18px; color: var(--primary-glow); font-weight: 600;" id="detailTokens">500</div>
                        <div style="font-size: 11px; color: rgba(255, 255, 255, 0.6);">Tokens</div>
                    </div>
                    <div style="flex: 1; text-align: center; padding: 12px; background: rgba(102, 217, 255, 0.1); border: 1px solid rgba(102, 217, 255, 0.2); border-radius: 12px;">
                        <div style="font-size: 18px; color: var(--accent-glow); font-weight: 600;" id="detailDifficulty">Easy</div>
                        <div style="font-size: 11px; color: rgba(255, 255, 255, 0.6);">Level</div>
                    </div>
                </div>

                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="glass-btn btn-primary" onclick="startChallenge()">🚀 Start Now</button>
                    <button class="glass-btn btn-secondary" onclick="closePage()">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Floating Profile Page -->
    <div class="floating-page" id="profilePage">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
            <div class="glass-button" onclick="closeProfile()" style="width: 40px; height: 40px;">←</div>
            <div style="font-size: 18px; color: var(--primary-glow); font-weight: 500;">My Profile</div>
            <div style="width: 40px;"></div>
        </div>

        <div class="page-glass">
            <div style="text-align: center; position: relative; z-index: 1;">
                <div style="width: 80px; height: 80px; border-radius: 40px; background: linear-gradient(135deg, var(--primary-glow), var(--accent-glow)); margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 32px; box-shadow: 0 0 30px rgba(0, 255, 170, 0.3);">👤</div>
                <div style="font-size: 22px; font-weight: 500; margin-bottom: 8px; color: #ffffff;" id="profileName">Alexandra Stone</div>
                <div style="color: rgba(255, 255, 255, 0.6); margin-bottom: 24px;" id="profileUsername">@alexandra_stone</div>
                
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin: 24px 0;">
                    <div style="background: rgba(0, 255, 170, 0.05); border: 1px solid rgba(0, 255, 170, 0.2); border-radius: 12px; padding: 16px 8px; text-align: center;">
                        <div style="font-size: 18px; color: var(--primary-glow); font-weight: 600; margin-bottom: 4px;" id="profileTokens">15,247</div>
                        <div style="font-size: 10px; color: rgba(255, 255, 255, 0.6);">🪙 Tokens</div>
                    </div>
                    <div style="background: rgba(102, 217, 255, 0.05); border: 1px solid rgba(102, 217, 255, 0.2); border-radius: 12px; padding: 16px 8px; text-align: center;">
                        <div style="font-size: 18px; color: var(--accent-glow); font-weight: 600; margin-bottom: 4px;" id="profileChallenges">143</div>
                        <div style="font-size: 10px; color: rgba(255, 255, 255, 0.6);">✅ Done</div>
                    </div>
                    <div style="background: rgba(255, 107, 71, 0.05); border: 1px solid rgba(255, 107, 71, 0.2); border-radius: 12px; padding: 16px 8px; text-align: center;">
                        <div style="font-size: 18px; color: #FF6B47; font-weight: 600; margin-bottom: 4px;" id="profileStreak">12</div>
                        <div style="font-size: 10px; color: rgba(255, 255, 255, 0.6);">🔥 Streak</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Glass Modals -->
    <div id="completionModal" class="glass-modal">
        <div class="modal-glass">
            <div class="modal-title">📸 Complete Challenge</div>
            
            <div class="form-group">
                <label class="form-label">Upload Photo/Video</label>
                <input type="file" class="glass-input" id="mediaFile" accept="image/*,video/*">
            </div>
            
            <div class="form-group">
                <label class="form-label">Describe Your Experience</label>
                <textarea class="glass-input" id="experienceDesc" rows="3" 
                    placeholder="Tell us about your experience..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Rate Your Experience</label>
                <div class="glass-stars" id="ratingStars">
                    <span class="glass-star" onclick="setRating(1)">⭐</span>
                    <span class="glass-star" onclick="setRating(2)">⭐</span>
                    <span class="glass-star" onclick="setRating(3)">⭐</span>
                    <span class="glass-star" onclick="setRating(4)">⭐</span>
                    <span class="glass-star" onclick="setRating(5)">⭐</span>
                </div>
            </div>
            
            <button class="glass-btn btn-primary" onclick="submitCompletion()">🤖 Submit for Review</button>
            <button class="glass-btn btn-secondary" onclick="hideModal('completion')">Cancel</button>
        </div>
    </div>

    <div id="createModal" class="glass-modal">
        <div class="modal-glass">
            <div class="modal-title">✨ Create Challenge</div>
            
            <div class="form-group">
                <label class="form-label">Title</label>
                <input type="text" class="glass-input" id="newTitle" placeholder="Enter title...">
            </div>
            
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="glass-input" id="newDesc" rows="3" placeholder="Describe your challenge..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Reward</label>
                <select class="glass-input" id="newTokens">
                    <option value="500">500 Tokens (Easy)</option>
                    <option value="1200">1,200 Tokens (Medium)</option>
                    <option value="2500">2,500 Tokens (Hard)</option>
                </select>
            </div>
            
            <button class="glass-btn btn-primary" onclick="createChallenge()">🚀 Create</button>
            <button class="glass-btn btn-secondary" onclick="hideModal('create')">Cancel</button>
        </div>
    </div>

    <div id="settingsModal" class="glass-modal">
        <div class="modal-glass">
            <div class="modal-title">⚙️ Settings</div>
            
            <div class="form-group">
                <label class="form-label">Display Name</label>
                <input type="text" class="glass-input" id="displayName" value="Alexandra Stone">
            </div>
            
            <div class="form-group">
                <label class="form-label">Username</label>
                <input type="text" class="glass-input" id="username" value="alexandra_stone">
            </div>
            
            <button class="glass-btn btn-primary" onclick="saveSettings()">💾 Save</button>
            <button class="glass-btn btn-secondary" onclick="hideModal('settings')">Cancel</button>
        </div>
    </div>

    <div id="welcomeModal" class="glass-modal">
        <div class="modal-glass">
            <div style="text-align: center; padding: 20px; position: relative; z-index: 1;">
                <div style="font-size: 48px; margin-bottom: 16px;">🚀</div>
                <h2 style="color: #ffffff; margin-bottom: 12px; font-weight: 500;">Welcome to JomBro!</h2>
                <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: 20px; line-height: 1.5;">
                    Complete real-world challenges, earn tokens, and have fun!
                </p>
            </div>
            
            <button class="glass-btn btn-primary" onclick="startTutorial()">🎯 Let's Go!</button>
            <button class="glass-btn btn-secondary" onclick="skipTutorial()">Skip</button>
        </div>
    </div>

    <!-- Floating Toast -->
    <div id="toast" class="floating-toast">
        <span id="toastText">Ready!</span>
    </div>

    <script>
        // ===== FLOATING GLASS JOMBRO SCRIPT =====

        // Cached DOM elements for performance
        const elements = {};
        const cache = (id) => elements[id] || (elements[id] = document.getElementById(id));

        // Global state
        let player = {
            name: 'Alexandra Stone',
            username: 'alexandra_stone',
            tokens: 15247,
            rank: 'Elite',
            completed: 143,
            streak: 12
        };

        let challenges = [];
        let currentIndex = 0;
        let currentChallenge = null;
        let selectedRating = 0;

        // ===== BACKGROUND PARTICLE SYSTEM =====
        function createParticles() {
            const particleField = cache('particleField');
            if (!particleField) return;

            // Create floating particles
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particleField.appendChild(particle);
            }
        }

        function createBlinkingDots() {
            const blinkDots = cache('blinkDots');
            if (!blinkDots) return;

            // Create blinking dots
            for (let i = 0; i < 20; i++) {
                const dot = document.createElement('div');
                dot.className = 'blink-dot';
                dot.style.left = Math.random() * 100 + '%';
                dot.style.top = Math.random() * 100 + '%';
                dot.style.animationDelay = Math.random() * 3 + 's';
                blinkDots.appendChild(dot);
            }
        }

        // ===== CHALLENGE DATA =====
        function initChallenges() {
            challenges = [
                {
                    id: '1',
                    title: "Coffee Shop Poetry",
                    description: "Ask a barista to write a poem on your cup! Spread joy and connect with people in your community.",
                    tokens: 500,
                    difficulty: "easy",
                    type: "daily",
                    creator: "JomBro",
                    hashtags: ["#Coffee", "#Poetry", "#Connection"],
                    requirements: [
                        "Visit any coffee shop",
                        "Ask barista for a poem",
                        "Take a photo",
                        "Share the experience"
                    ]
                },
                {
                    id: '2',
                    title: "Random Menu Challenge",
                    description: "Close your eyes and point at a menu to order! Try something completely new and rate your surprise meal.",
                    tokens: 1200,
                    difficulty: "medium",
                    type: "business",
                    creator: "Food Explorer",
                    hashtags: ["#Food", "#Surprise", "#Adventure"],
                    requirements: [
                        "Go to any restaurant",
                        "Close eyes and point at menu",
                        "Order what you pointed at",
                        "Document your reaction"
                    ]
                },
                {
                    id: '3',
                    title: "Hidden Gems Hunt",
                    description: "Discover 3 hidden gems in your city that tourists don't know about. Share these secret spots!",
                    tokens: 2500,
                    difficulty: "hard",
                    type: "adventure",
                    creator: "City Explorer",
                    hashtags: ["#Hidden", "#Gems", "#Local"],
                    requirements: [
                        "Find 3 hidden local spots",
                        "Take photos at each location",
                        "Research their history",
                        "Create a mini guide"
                    ]
                },
                {
                    id: '4',
                    title: "Public Workout",
                    description: "Do 30 push-ups in a public place and inspire others to join you! Spread fitness motivation.",
                    tokens: 800,
                    difficulty: "medium",
                    type: "fitness",
                    creator: "Fit Coach",
                    hashtags: ["#Fitness", "#Public", "#Motivation"],
                    requirements: [
                        "Choose a public location",
                        "Do 30 push-ups",
                        "Invite others to join",
                        "Document reactions"
                    ]
                },
                {
                    id: '5',
                    title: "Compliment Challenge",
                    description: "Give genuine compliments to 5 strangers today. Spread positivity and brighten people's day!",
                    tokens: 600,
                    difficulty: "easy",
                    type: "social",
                    creator: "Positivity Pro",
                    hashtags: ["#Kindness", "#Compliments", "#Positive"],
                    requirements: [
                        "Approach 5 different people",
                        "Give genuine compliments",
                        "Note their reactions",
                        "Reflect on the experience"
                    ]
                }
            ];
        }

        // ===== UTILITY FUNCTIONS =====
        function showToast(message, isError = false) {
            const toast = cache('toast');
            const text = cache('toastText');
            if (!toast || !text) return;
            
            text.textContent = message;
            toast.className = `floating-toast ${isError ? 'error' : ''}`;
            toast.classList.add('show');
            
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function showModal(id) {
            const modal = cache(id + 'Modal');
            if (modal) modal.classList.add('show');
        }

        function hideModal(id) {
            const modal = cache(id + 'Modal');
            if (modal) modal.classList.remove('show');
        }

        function updateElement(id, content) {
            const el = cache(id);
            if (el) el.textContent = content;
        }

        // ===== CHALLENGE DISPLAY =====
        function renderChallenge(challenge, index) {
            const isActive = index === currentIndex;
            
            return `
                <div class="challenge-card ${isActive ? 'active' : ''}" data-index="${index}">
                    <div class="challenge-content">
                        <div class="challenge-header">
                            <div class="challenge-avatar">${getTypeIcon(challenge.type)}</div>
                            <div class="challenge-user">
                                <div class="challenge-username">${challenge.creator}</div>
                                <div class="challenge-type">${challenge.type}</div>
                            </div>
                        </div>
                        
                        <div class="challenge-body">
                            <div class="challenge-title">${challenge.title}</div>
                            <div class="challenge-description">${challenge.description}</div>
                            
                            <div class="challenge-hashtags">
                                ${challenge.hashtags.map(tag => `<span class="hashtag">${tag}</span>`).join('')}
                            </div>
                        </div>
                        
                        <div class="challenge-reward">
                            🪙 ${challenge.tokens.toLocaleString()} Tokens • ${challenge.difficulty.toUpperCase()}
                        </div>
                        
                        <div class="challenge-actions">
                            <button class="glass-btn btn-primary" onclick="acceptChallenge('${challenge.id}')">
                                🚀 Accept
                            </button>
                            <button class="glass-btn btn-secondary" onclick="nextChallenge()">
                                Skip
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function getTypeIcon(type) {
            const icons = {
                daily: '☕',
                business: '🍟',
                adventure: '🗺️',
                fitness: '💪',
                social: '😊'
            };
            return icons[type] || '⭐';
        }

        function updateChallengeDisplay() {
            const container = cache('challengeContainer');
            if (!container) return;
            
            container.innerHTML = challenges.map((challenge, index) => 
                renderChallenge(challenge, index)
            ).join('');
            
            updateCounter();
            updatePoints();
        }

        function updateCounter() {
            updateElement('challengeCounter', `${currentIndex + 1}/${challenges.length}`);
        }

        function updatePoints() {
            if (challenges[currentIndex]) {
                const tokens = challenges[currentIndex].tokens;
                const display = tokens >= 1000 ? (tokens / 1000).toFixed(1) + 'K' : tokens;
                updateElement('currentPoints', display);
            }
        }

        // ===== NAVIGATION =====
        function nextChallenge() {
            currentIndex = (currentIndex + 1) % challenges.length;
            updateChallengeDisplay();
            showToast('⏭️ Next challenge');
        }

        function prevChallenge() {
            currentIndex = currentIndex === 0 ? challenges.length - 1 : currentIndex - 1;
            updateChallengeDisplay();
            showToast('⏮️ Previous challenge');
        }

        function acceptChallenge(id) {
            currentChallenge = challenges.find(c => c.id === id);
            if (!currentChallenge) return;
            
            updateElement('detailTitle', currentChallenge.title);
            updateElement('detailDescription', currentChallenge.description);
            updateElement('detailTokens', currentChallenge.tokens.toLocaleString());
            updateElement('detailDifficulty', currentChallenge.difficulty);
            
            const list = cache('requirementsList');
            if (list) {
                list.innerHTML = currentChallenge.requirements
                    .map(req => `<li style="padding: 4px 0; color: rgba(255, 255, 255, 0.8); position: relative; padding-left: 20px;"><span style="position: absolute; left: 0; color: var(--primary-glow);">✓</span>${req}</li>`)
                    .join('');
            }
            
            cache('challengePage').classList.add('show');
        }

        function closePage() {
            cache('challengePage').classList.remove('show');
        }

        function startChallenge() {
            closePage();
            showToast('🚀 Challenge started! Complete it and submit proof.');
            setTimeout(() => showModal('completion'), 2000);
        }

        // ===== CHALLENGE COMPLETION =====
        function setRating(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('.glass-star');
            stars.forEach((star, index) => {
                star.className = 'glass-star';
                if (index < rating) star.classList.add('active');
            });
        }

        function submitCompletion() {
            const desc = cache('experienceDesc');
            if (!desc || !desc.value.trim()) {
                showToast('Please describe your experience', true);
                return;
            }
            
            if (selectedRating === 0) {
                showToast('Please rate the challenge', true);
                return;
            }
            
            showToast('🤖 AI reviewing submission...');
            
            setTimeout(() => {
                const score = calculateScore(desc.value);
                const tokens = Math.floor(currentChallenge.tokens * (score / 100));
                
                player.tokens += tokens;
                player.completed++;
                updatePlayerDisplay();
                
                showReviewResult(score, tokens);
                hideModal('completion');
                resetForm();
            }, 2000);
        }

        function calculateScore(description) {
            let score = 50;
            if (description.length > 50) score += 20;
            if (description.length > 100) score += 10;
            if (selectedRating >= 4) score += 10;
            if (/amazing|awesome|great|fun|love/.test(description.toLowerCase())) score += 10;
            return Math.min(score, 95);
        }

        function showReviewResult(score, tokens) {
            const emoji = score >= 80 ? '🎉' : score >= 60 ? '⭐' : '💪';
            const title = score >= 80 ? 'Excellent!' : score >= 60 ? 'Great Job!' : 'Good Try!';
            
            const modal = document.createElement('div');
            modal.className = 'glass-modal show';
            modal.innerHTML = `
                <div class="modal-glass" style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 16px; position: relative; z-index: 1;">${emoji}</div>
                    <h2 style="margin-bottom: 12px; color: #ffffff; font-weight: 500; position: relative; z-index: 1;">${title}</h2>
                    
                    <div style="background: rgba(0, 255, 170, 0.1); border: 1px solid var(--primary-glow); padding: 16px; border-radius: 12px; margin: 16px 0; position: relative; z-index: 1;">
                        <div style="font-size: 20px; color: var(--primary-glow); font-weight: 600;">
                            +${tokens.toLocaleString()} Tokens
                        </div>
                        <div style="font-size: 14px; color: rgba(255, 255, 255, 0.7);">
                            Score: ${score}/100
                        </div>
                    </div>
                    
                    <button class="glass-btn btn-primary" onclick="this.closest('.glass-modal').remove(); nextChallenge();" style="position: relative; z-index: 1;">
                        🚀 Next Challenge
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function resetForm() {
            selectedRating = 0;
            document.querySelectorAll('.glass-star').forEach(star => star.className = 'glass-star');
            
            const desc = cache('experienceDesc');
            const file = cache('mediaFile');
            if (desc) desc.value = '';
            if (file) file.value = '';
        }

        // ===== CREATE CHALLENGE =====
        function createChallenge() {
            const title = cache('newTitle');
            const desc = cache('newDesc');
            const tokens = cache('newTokens');
            
            if (!title || !title.value.trim()) {
                showToast('Please enter a title', true);
                return;
            }
            
            if (!desc || !desc.value.trim()) {
                showToast('Please enter a description', true);
                return;
            }
            
            const newChallenge = {
                id: Date.now().toString(),
                title: title.value,
                description: desc.value,
                tokens: parseInt(tokens.value),
                difficulty: tokens.value >= 2000 ? 'hard' : tokens.value >= 1000 ? 'medium' : 'easy',
                type: 'user',
                creator: player.name,
                hashtags: ['#UserChallenge', '#JomBro'],
                requirements: [
                    'Complete the challenge as described',
                    'Take photos/videos as proof',
                    'Share your experience'
                ]
            };
            
            challenges.unshift(newChallenge);
            currentIndex = 0;
            updateChallengeDisplay();
            
            hideModal('create');
            showToast('✨ Challenge created!');
            
            // Clear form
            title.value = '';
            desc.value = '';
        }

        // ===== SETTINGS =====
        function saveSettings() {
            const name = cache('displayName');
            const username = cache('username');
            
            if (name && name.value.trim()) {
                player.name = name.value.trim();
            }
            
            if (username && username.value.trim()) {
                player.username = username.value.trim();
            }
            
            updatePlayerDisplay();
            hideModal('settings');
            showToast('⚙️ Settings saved!');
        }

        // ===== PROFILE =====
        function showProfile() {
            updateElement('profileName', player.name);
            updateElement('profileUsername', `@${player.username}`);
            updateElement('profileTokens', player.tokens.toLocaleString());
            updateElement('profileChallenges', player.completed);
            updateElement('profileStreak', player.streak);
            
            cache('profilePage').classList.add('show');
        }

        function closeProfile() {
            cache('profilePage').classList.remove('show');
        }

        // ===== NAVIGATION =====
        function navTo(element, section) {
            document.querySelectorAll('.nav-item').forEach(item => 
                item.classList.remove('active')
            );
            element.classList.add('active');
            
            if (section === 'profile') {
                showProfile();
            } else if (section === 'create') {
                showModal('create');
            } else {
                showToast(`📱 ${section}`);
            }
        }

        // ===== PLAYER DISPLAY =====
        function updatePlayerDisplay() {
            updateElement('playerRank', player.rank);
            updateElement('playerTokens', `🪙 ${player.tokens.toLocaleString()}`);
        }

        // ===== ACTIONS =====
        function likeChallenge() {
            showToast('❤️ Liked!');
        }

        function shareChallenge() {
            if (navigator.share && currentChallenge) {
                navigator.share({
                    title: currentChallenge.title,
                    text: currentChallenge.description
                }).then(() => showToast('📤 Shared!'))
                .catch(() => showToast('📤 Share failed'));
            } else {
                showToast('📤 Shared!');
            }
        }

        function bookmarkChallenge() {
            showToast('🔖 Bookmarked!');
        }

        function showHelp() {
            showToast('❓ Help coming soon!');
        }

        // ===== ONBOARDING =====
        function checkFirstLaunch() {
            const hasLaunched = localStorage.getItem('jombro_launched');
            if (!hasLaunched) {
                setTimeout(() => showModal('welcome'), 1500);
            }
        }

        function startTutorial() {
            localStorage.setItem('jombro_launched', 'true');
            hideModal('welcome');
            showToast('🎯 Swipe up/down to browse challenges!');
        }

        function skipTutorial() {
            localStorage.setItem('jombro_launched', 'true');
            hideModal('welcome');
        }

        // ===== TOUCH HANDLING =====
        let startY = 0;
        let startTime = 0;

        document.addEventListener('touchstart', (e) => {
            startY = e.touches[0].clientY;
            startTime = Date.now();
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            if (!startY) return;
            
            const endY = e.changedTouches[0].clientY;
            const deltaY = startY - endY;
            const deltaTime = Date.now() - startTime;
            
            // Only handle quick swipes on feed
            if (Math.abs(deltaY) > 50 && deltaTime < 300 && e.target.closest('.floating-feed')) {
                if (deltaY > 0) {
                    nextChallenge();
                } else {
                    prevChallenge();
                }
            }
            
            startY = 0;
        }, { passive: true });

        // ===== INITIALIZATION =====
        function init() {
            initChallenges();
            updatePlayerDisplay();
            updateChallengeDisplay();
            createParticles();
            createBlinkingDots();
            checkFirstLaunch();
            
            console.log('Floating Glass JomBro initialized');
        }

        // Initialize when ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }

        // Prevent zoom on double tap
        let lastTouch = 0;
        document.addEventListener('touchend', (e) => {
            const now = Date.now();
            if (now - lastTouch <= 300) {
                e.preventDefault();
            }
            lastTouch = now;
        });
    </script>
</body>
</html>
