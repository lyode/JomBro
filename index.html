<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    
    <!-- Enhanced Mobile Viewport -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="JomBro Live">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#000000">
    
    <title>JomBro Live - Real Challenges</title>

    <style>
        :root {
            --safe-area-top: env(safe-area-inset-top, 0px);
            --safe-area-bottom: env(safe-area-inset-bottom, 0px);
            --safe-area-left: env(safe-area-inset-left, 0px);
            --safe-area-right: env(safe-area-inset-right, 0px);
            
            --header-height: 60px;
            --nav-height: 84px;
            --content-padding: 20px;
            --button-height: 52px;
            --button-radius: 26px;
            --touch-target: 44px;
            
            /* Color System */
            --primary: #00FF96;
            --secondary: #405DE6;
            --accent: #FFD700;
            --error: #FF6B6B;
            --success: #4CAF50;
            --bg-dark: #000000;
            --bg-card: rgba(0, 0, 0, 0.15);
            --bg-modal: rgba(0, 0, 0, 0.25);
            --border-light: rgba(255, 255, 255, 0.08);
            --text-primary: #FFFFFF;
            --text-secondary: rgba(255, 255, 255, 0.8);
            
            /* Live Challenge Colors */
            --live-primary: #ff4757;
            --live-secondary: #3742fa;
            --live-success: #2ed573;
            --live-warning: #ffa502;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            user-select: none;
            -webkit-font-smoothing: antialiased;
            touch-action: manipulation;
        }

        html, body {
            height: 100vh;
            height: 100svh;
            overflow: hidden;
            position: fixed;
            width: 100%;
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', system-ui, sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
        }

        /* ===== STARFIELD BACKGROUND ===== */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(2px 2px at 20px 30px, #ffffff, transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            opacity: 0.4;
            z-index: 0;
        }

        /* ===== LIVE MODE BANNER ===== */
        .live-banner {
            position: fixed;
            top: var(--safe-area-top);
            left: 0;
            right: 0;
            background: linear-gradient(135deg, var(--live-primary), var(--live-secondary));
            color: white;
            padding: 8px 20px;
            text-align: center;
            font-size: 12px;
            font-weight: bold;
            z-index: 1001;
            animation: livePulse 2s ease-in-out infinite;
        }

        @keyframes livePulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.9; }
        }

        /* ===== MAIN CONTAINER ===== */
        .app-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            flex-direction: column;
            z-index: 10;
            background: linear-gradient(135deg, 
                rgba(255, 71, 87, 0.05) 0%, 
                transparent 50%, 
                rgba(55, 66, 250, 0.05) 100%);
            padding-top: 35px;
        }

        /* ===== HEADER ===== */
        .header {
            position: fixed;
            top: calc(var(--safe-area-top) + 35px);
            left: 0;
            right: 0;
            height: var(--header-height);
            background: var(--bg-card);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 var(--content-padding);
            z-index: 1000;
        }

        .logo {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            justify-content: center;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 100;
            color: var(--text-primary);
            line-height: 1;
        }

        .logo-slogan {
            font-size: 10px;
            color: var(--live-primary);
            font-weight: 600;
            margin-top: 2px;
            line-height: 1.2;
            text-transform: uppercase;
        }

        .header-actions {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .header-btn {
            min-width: var(--touch-target);
            min-height: var(--touch-target);
            width: 40px;
            height: 40px;
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid var(--border-light);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            cursor: pointer;
            color: var(--text-primary);
            transition: all 0.2s ease;
            position: relative;
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
        }

        .header-btn:active {
            transform: scale(0.95);
            background: rgba(255, 71, 87, 0.3);
            color: white;
        }

        /* ===== PLAYER INFO ===== */
        .player-info {
            position: fixed;
            top: calc(var(--safe-area-top) + var(--header-height) + 47px);
            right: var(--content-padding);
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: 16px;
            padding: 12px 16px;
            font-size: 13px;
            z-index: 950;
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
        }

        .player-rank {
            color: var(--accent);
            font-weight: 700;
            margin-bottom: 4px;
            text-align: center;
        }

        .player-points {
            color: var(--live-primary);
            font-weight: 800;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .live-badge {
            background: var(--live-primary);
            color: white;
            padding: 2px 6px;
            border-radius: 8px;
            font-size: 8px;
            font-weight: bold;
            margin-top: 4px;
        }

        /* ===== CONTENT AREA ===== */
        .content-area {
            position: fixed;
            top: calc(var(--safe-area-top) + var(--header-height) + 35px);
            left: 0;
            right: 0;
            bottom: calc(var(--nav-height) + var(--safe-area-bottom));
            padding: var(--content-padding);
            padding-top: 90px;
            overflow: hidden;
        }

        /* ===== CHALLENGE CONTAINER ===== */
        .challenge-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .challenge-card {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-card);
            backdrop-filter: blur(30px);
            -webkit-backdrop-filter: blur(30px);
            border: 1px solid var(--border-light);
            border-radius: 24px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            transform-origin: center bottom;
            transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .challenge-card.current {
            opacity: 1;
            transform: translateY(0) scale(1);
            z-index: 10;
        }

        .challenge-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
            flex-shrink: 0;
        }

        .challenge-user {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .challenge-avatar {
            width: 44px;
            height: 44px;
            border-radius: 22px;
            background: linear-gradient(45deg, var(--live-primary), var(--live-secondary));
            padding: 2px;
            flex-shrink: 0;
        }

        .challenge-avatar-inner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--bg-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-size: 16px;
        }

        .challenge-username {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .challenge-type {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            background: rgba(255, 71, 87, 0.2);
            color: var(--live-primary);
            border: 1px solid rgba(255, 71, 87, 0.3);
        }

        .challenge-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .challenge-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--live-primary);
            line-height: 1.3;
            margin-bottom: 8px;
        }

        .challenge-description {
            font-size: 16px;
            line-height: 1.6;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .challenge-requirements {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid var(--live-primary);
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
        }

        .requirements-title {
            color: var(--live-primary);
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .requirements-list {
            list-style: none;
            margin: 0;
        }

        .requirements-list li {
            padding: 6px 0;
            padding-left: 20px;
            position: relative;
            font-size: 14px;
            color: var(--text-secondary);
        }

        .requirements-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--live-success);
            font-weight: bold;
        }

        .challenge-hashtags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .challenge-hashtag {
            padding: 8px 12px;
            background: rgba(55, 66, 250, 0.1);
            border: 1px solid rgba(55, 66, 250, 0.3);
            border-radius: 16px;
            font-size: 12px;
            color: var(--live-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .challenge-reward {
            background: rgba(46, 213, 115, 0.1);
            border: 1px solid var(--live-success);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            margin-bottom: 16px;
        }

        .reward-amount {
            font-size: 20px;
            font-weight: 800;
            color: var(--live-success);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .reward-note {
            font-size: 12px;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .challenge-actions {
            padding: 20px;
            border-top: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            gap: 12px;
            flex-shrink: 0;
        }

        .challenge-btn {
            width: 100%;
            min-height: 44px;
            height: 44px;
            border: none;
            border-radius: 22px;
            font-size: 14px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-accept {
            background: var(--live-primary);
            color: white;
            box-shadow: 0 4px 12px rgba(255, 71, 87, 0.3);
        }

        .btn-accept:active {
            background: #e84057;
            transform: translateY(1px);
        }

        .btn-decline {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-light);
            color: var(--text-primary);
        }

        /* ===== CHALLENGE SUBMISSION MODAL ===== */
        .submission-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 20px;
        }

        .submission-modal.show {
            display: flex;
            animation: modalFadeIn 0.3s ease;
        }

        .submission-content {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: 24px;
            padding: 30px;
            width: 100%;
            max-width: 450px;
            backdrop-filter: blur(20px);
            max-height: 85vh;
            overflow-y: auto;
        }

        .submission-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--live-primary);
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
            transition: all 0.2s ease;
        }

        .form-control:focus {
            border-color: var(--live-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .file-upload {
            border: 2px dashed var(--border-light);
            border-radius: 12px;
            padding: 30px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.02);
        }

        .file-upload:hover {
            border-color: var(--live-primary);
            background: rgba(255, 71, 87, 0.05);
        }

        .file-upload.has-file {
            border-color: var(--live-success);
            background: rgba(46, 213, 115, 0.1);
        }

        .upload-icon {
            font-size: 48px;
            margin-bottom: 15px;
            opacity: 0.6;
        }

        .upload-text {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .upload-hint {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .file-preview {
            margin-top: 15px;
            padding: 10px;
            background: rgba(46, 213, 115, 0.1);
            border-radius: 8px;
            font-size: 14px;
            color: var(--live-success);
        }

        .rating-section {
            margin: 20px 0;
        }

        .rating-stars {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 15px 0;
        }

        .star {
            font-size: 32px;
            cursor: pointer;
            opacity: 0.3;
            transition: all 0.2s ease;
            padding: 5px;
        }

        .star.active {
            opacity: 1;
            transform: scale(1.1);
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: var(--live-primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }

        .submit-btn:active {
            transform: scale(0.98);
            background: #e84057;
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* ===== COMPLETED CHALLENGES FEED ===== */
        .completed-feed {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .feed-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
            background: rgba(46, 213, 115, 0.1);
        }

        .feed-title {
            color: var(--live-success);
            font-weight: 700;
            font-size: 18px;
            text-align: center;
        }

        .feed-item {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            gap: 15px;
        }

        .feed-item:last-child {
            border-bottom: none;
        }

        .feed-avatar {
            width: 50px;
            height: 50px;
            border-radius: 25px;
            background: linear-gradient(45deg, var(--live-success), var(--live-primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            flex-shrink: 0;
        }

        .feed-content {
            flex: 1;
        }

        .feed-user {
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }

        .feed-challenge {
            color: var(--live-primary);
            font-size: 14px;
            margin-bottom: 8px;
        }

        .feed-description {
            color: var(--text-secondary);
            font-size: 13px;
            line-height: 1.4;
            margin-bottom: 10px;
        }

        .feed-meta {
            display: flex;
            gap: 15px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .feed-points {
            color: var(--live-success);
            font-weight: 600;
        }

        /* ===== BOTTOM NAVIGATION ===== */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: calc(var(--nav-height) + var(--safe-area-bottom));
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding-bottom: var(--safe-area-bottom);
            z-index: 1000;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 12px;
            border-radius: 16px;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s ease;
            min-height: var(--touch-target);
            min-width: var(--touch-target);
            position: relative;
        }

        .nav-item.active {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            color: var(--live-primary);
            transform: translateY(-2px);
        }

        .nav-icon {
            font-size: 22px;
            margin-bottom: 4px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* ===== TOAST NOTIFICATIONS ===== */
        .toast {
            position: fixed;
            top: calc(var(--safe-area-top) + 100px);
            left: var(--content-padding);
            right: var(--content-padding);
            background: var(--bg-card);
            border: 1px solid var(--live-primary);
            border-radius: 16px;
            padding: 16px 20px;
            font-size: 15px;
            font-weight: 600;
            text-align: center;
            color: var(--text-primary);
            z-index: 4000;
            transform: translateY(-100px);
            opacity: 0;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-color: var(--live-success);
            background: rgba(46, 213, 115, 0.1);
        }

        .toast.warning {
            border-color: var(--live-warning);
            background: rgba(255, 165, 2, 0.1);
        }

        /* ===== ANIMATIONS ===== */
        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 375px) {
            :root {
                --content-padding: 16px;
                --header-height: 56px;
                --nav-height: 80px;
            }
        }
    </style>
</head>
<body>
    <!-- Starfield Background -->
    <div class="starfield"></div>

    <!-- Live Mode Banner -->
    <div class="live-banner">
        üî¥ LIVE CHALLENGES - Real Activities, No Payment Required
    </div>

    <!-- Main App Container -->
    <div class="app-container">
        
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-text">JomBro</div>
                <div class="logo-slogan">Live Challenges</div>
            </div>
            <div class="header-actions">
                <div class="header-btn" onclick="showCompletedFeed()">üìã</div>
                <div class="header-btn" onclick="showLiveInfo()">‚ùì</div>
                <div class="header-btn" onclick="shareChallenge()">üì§</div>
            </div>
        </div>

        <!-- Player Info -->
        <div class="player-info">
            <div class="player-rank" id="playerRank">Challenge Explorer</div>
            <div class="player-points">
                <span>üèÜ</span>
                <span id="pointAmount">0</span>
            </div>
            <div class="live-badge">LIVE</div>
        </div>

        <!-- Main Content Area -->
        <div class="content-area">
            <div class="challenge-container" id="challengeContainer">
                <!-- Challenge cards will be dynamically generated -->
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" onclick="navAction(this, 'home')">
                <div class="nav-icon">üè†</div>
                <div class="nav-label">Home</div>
            </div>
            <div class="nav-item" onclick="navAction(this, 'challenges')">
                <div class="nav-icon">‚ö°</div>
                <div class="nav-label">Next</div>
            </div>
            <div class="nav-item" onclick="navAction(this, 'completed')">
                <div class="nav-icon">‚úÖ</div>
                <div class="nav-label">Done</div>
            </div>
            <div class="nav-item" onclick="navAction(this, 'leaderboard')">
                <div class="nav-icon">üèÜ</div>
                <div class="nav-label">Scores</div>
            </div>
            <div class="nav-item" onclick="navAction(this, 'profile')">
                <div class="nav-icon">üë§</div>
                <div class="nav-label">Profile</div>
            </div>
        </div>
    </div>

    <!-- Challenge Submission Modal -->
    <div id="submissionModal" class="submission-modal">
        <div class="submission-content">
            <div class="submission-title">üì∏ Complete Challenge</div>
            
            <div class="form-group">
                <label class="form-label">Upload Photo/Video Evidence</label>
                <div class="file-upload" onclick="document.getElementById('fileInput').click()">
                    <div class="upload-icon">üì∑</div>
                    <div class="upload-text">Tap to upload photo or video</div>
                    <div class="upload-hint">Show proof you completed this challenge!</div>
                    <div id="filePreview" class="file-preview" style="display: none;"></div>
                </div>
                <input type="file" id="fileInput" accept="image/*,video/*" style="display: none;" onchange="handleFileUpload(this)">
            </div>

            <div class="form-group">
                <label class="form-label">Describe Your Experience</label>
                <textarea class="form-control" id="experienceText" rows="4" 
                    placeholder="How was it? What happened? Any funny moments?"></textarea>
            </div>

            <div class="rating-section">
                <label class="form-label">Rate This Challenge</label>
                <div class="rating-stars" id="challengeRating">
                    <span class="star" onclick="setRating(1)">‚≠ê</span>
                    <span class="star" onclick="setRating(2)">‚≠ê</span>
                    <span class="star" onclick="setRating(3)">‚≠ê</span>
                    <span class="star" onclick="setRating(4)">‚≠ê</span>
                    <span class="star" onclick="setRating(5)">‚≠ê</span>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Share on Social? (Optional)</label>
                <select class="form-control" id="socialShare">
                    <option value="">Keep it private</option>
                    <option value="instagram">Share on Instagram Story</option>
                    <option value="whatsapp">Share on WhatsApp Status</option>
                    <option value="facebook">Share on Facebook</option>
                </select>
            </div>

            <button class="submit-btn" onclick="submitChallenge()" id="submitBtn">
                üèÜ Complete Challenge
            </button>
            <button class="submit-btn" onclick="closeSubmission()" style="background: rgba(255,255,255,0.1); margin-top: 5px;">
                Cancel
            </button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <span id="toastText">Ready for real challenges!</span>
    </div>

    <script>
        // ===== JOMBRO LIVE CHALLENGES JAVASCRIPT =====

        // Live challenge configuration
        const LIVE_CONFIG = {
            realChallenges: true,
            paymentRequired: false,
            pointsOnly: true,
            socialSharing: true,
            photoRequired: true
        };

        // Player data for live challenges
        let livePlayerData = {
            username: 'challenger_' + Math.random().toString(36).substr(2, 6),
            displayName: 'Challenge Explorer',
            points: 0,
            rank: 'Challenge Explorer',
            completedChallenges: [],
            currentChallenge: null
        };

        // Real challenges that people can actually do
        let realChallengeData = [
            {
                id: 'real_001',
                title: "Coffee Shop Compliment Challenge",
                description: "Visit any coffee shop and genuinely compliment the barista on something specific (their smile, efficiency, latte art, etc.). Take a photo of your coffee and share how the interaction made you feel!",
                requirements: [
                    "Visit a coffee shop",
                    "Give a genuine, specific compliment to the barista",
                    "Buy any drink (even the cheapest one is fine)",
                    "Take a photo of your coffee/receipt",
                    "Write about the barista's reaction"
                ],
                hashtags: ["#Kindness", "#Coffee", "#GoodVibes"],
                difficulty: "easy",
                points: 100,
                timeEstimate: "15-20 minutes",
                type: "social",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FFD700"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">‚òï</text></svg>',
                tips: "Be genuine! Baristas work hard and appreciate real compliments."
            },
            {
                id: 'real_002',
                title: "Street Art Discovery Walk",
                description: "Take a 30-minute walk in your area and find 3 interesting pieces of street art, murals, or unique building decorations. Photograph each one and create a mini 'art tour' story!",
                requirements: [
                    "Walk for at least 30 minutes",
                    "Find 3 different pieces of street art/murals",
                    "Take clear photos of each piece",
                    "Note the location of each artwork",
                    "Write a short description of your favorite piece"
                ],
                hashtags: ["#StreetArt", "#Walking", "#Discovery"],
                difficulty: "easy",
                points: 150,
                timeEstimate: "30-45 minutes",
                type: "exploration",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%234FC3F7"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üé®</text></svg>',
                tips: "Look up! Many murals are above eye level. Also check alleyways and side streets."
            },
            {
                id: 'real_003',
                title: "Random Act of Kindness",
                description: "Do something unexpectedly nice for a stranger today! Hold a door open with a smile, help someone carry something, pay for someone's parking, or leave a positive note. Small gestures, big impact!",
                requirements: [
                    "Perform a random act of kindness for a stranger",
                    "Make sure it's genuine and not disruptive",
                    "Take a photo that captures the moment (without being intrusive)",
                    "Write about what you did and how it felt",
                    "Note the person's reaction if appropriate"
                ],
                hashtags: ["#Kindness", "#PayItForward", "#GoodDeed"],
                difficulty: "medium",
                points: 200,
                timeEstimate: "20-60 minutes",
                type: "social",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FF6B47"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">‚ù§Ô∏è</text></svg>',
                tips: "Keep it simple and natural. The best acts of kindness feel effortless!"
            },
            {
                id: 'real_004',
                title: "Local Business Discovery",
                description: "Find a local business you've never been to before and try their most popular item or signature service. Support local entrepreneurs and discover hidden gems in your community!",
                requirements: [
                    "Choose a local business you've never visited",
                    "Ask for their most popular/signature item",
                    "Make a purchase (can be small!)",
                    "Take a photo of the item/experience",
                    "Write a mini review of your experience"
                ],
                hashtags: ["#LocalBusiness", "#Discovery", "#Community"],
                difficulty: "medium",
                points: 180,
                timeEstimate: "30-60 minutes",
                type: "exploration",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%2300B14F"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üè™</text></svg>',
                tips: "Ask the owner/staff about their story! Local businesses often have interesting backgrounds."
            },
            {
                id: 'real_005',
                title: "Public Speaking Mini Challenge",
                description: "Record a 60-second video of yourself explaining why you love something about your city/area. Share one specific thing that makes your location special. Be genuine and enthusiastic!",
                requirements: [
                    "Record a 60-second video of yourself",
                    "Explain one thing you love about your city/area",
                    "Be enthusiastic and genuine",
                    "Record in a public or semi-public space",
                    "Include the location in your video description"
                ],
                hashtags: ["#PublicSpeaking", "#LocalPride", "#Confidence"],
                difficulty: "hard",
                points: 250,
                timeEstimate: "20-30 minutes",
                type: "personal",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23E91E63"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üé§</text></svg>',
                tips: "Practice once before recording! Think about what genuinely excites you about your area."
            },
            {
                id: 'real_006',
                title: "Nature Photo Scavenger Hunt",
                description: "Find and photograph 5 different natural elements in your area: something green, something colorful, something that moves, something textured, and something that represents growth.",
                requirements: [
                    "Find something green in nature",
                    "Find something colorful (flower, sunset, etc.)",
                    "Capture something that moves (bird, water, leaves)",
                    "Find something with interesting texture",
                    "Find something that represents growth or life"
                ],
                hashtags: ["#Nature", "#Photography", "#Outdoors"],
                difficulty: "easy",
                points: 130,
                timeEstimate: "45-60 minutes",
                type: "exploration",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%2334C759"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üåø</text></svg>',
                tips: "Look for patterns and details! Nature has amazing textures when you look closely."
            },
            {
                id: 'real_007',
                title: "Skill Share Challenge",
                description: "Teach someone something you know how to do! It could be folding a paper airplane, tying a knot, making a simple recipe, or any skill you have. Share knowledge and connect with others!",
                requirements: [
                    "Choose a skill you can teach",
                    "Find someone willing to learn (friend, family, stranger)",
                    "Teach them the skill patiently",
                    "Take a photo/video of the teaching moment",
                    "Write about what you taught and how it went"
                ],
                hashtags: ["#SkillShare", "#Teaching", "#Community"],
                difficulty: "medium",
                points: 190,
                timeEstimate: "30-45 minutes",
                type: "social",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FF9500"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üéì</text></svg>',
                tips: "Start with something simple! The goal is connection and sharing, not perfection."
            },
            {
                id: 'real_008',
                title: "Cultural Food Adventure",
                description: "Try a cuisine you've never had before or visit a restaurant representing a different culture. Step out of your comfort zone and expand your palate!",
                requirements: [
                    "Choose a cuisine you've never tried",
                    "Visit a restaurant or food stall",
                    "Order something authentic to that culture",
                    "Take a photo of your meal",
                    "Write about the flavors and your experience"
                ],
                hashtags: ["#Food", "#Culture", "#Adventure"],
                difficulty: "easy",
                points: 140,
                timeEstimate: "60-90 minutes",
                type: "exploration",
                creator: "JomBro Community",
                avatar: 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23FF3B30"/><text x="50" y="55" text-anchor="middle" fill="white" font-size="30">üçú</text></svg>',
                tips: "Ask the staff for recommendations! They'll appreciate your interest in their culture."
            }
        ];

        let currentPage = 0;
        let selectedRating = 0;
        let currentActiveChallenge = null;
        let completedChallenges = [];
        let uploadedFile = null;

        // ===== INITIALIZATION =====
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üî¥ JomBro Live Challenges Started');
            initializeLiveChallenges();
            updateChallengeDisplay();
            loadCompletedChallenges();
            showToast('üî¥ Ready for real challenges! Complete activities and earn points.', 'success');
        });

        function initializeLiveChallenges() {
            document.title = 'JomBro Live - Real Challenges';
            updatePlayerDisplay();
            
            console.log('Live Challenge Session Started:', {
                timestamp: new Date().toISOString(),
                userAgent: navigator.userAgent,
                config: LIVE_CONFIG
            });
        }

        // ===== CHALLENGE DISPLAY =====
        function updateChallengeDisplay() {
            const container = document.getElementById('challengeContainer');
            if (!container) return;
            
            container.innerHTML = '';
            
            realChallengeData.forEach((challenge, index) => {
                const card = createRealChallengeCard(challenge, index);
                container.appendChild(card);
            });

            updateCurrentChallenge();
        }

        function createRealChallengeCard(challenge, index) {
            const card = document.createElement('div');
            card.className = `challenge-card ${index === currentPage ? 'current' : ''}`;

            const getDifficultyColor = (difficulty) => ({
                'easy': '#2ed573',
                'medium': '#ffa502', 
                'hard': '#ff4757'
            }[difficulty] || '#2ed573');

            card.innerHTML = `
                <div class="challenge-header">
                    <div class="challenge-user">
                        <div class="challenge-avatar">
                            <div class="challenge-avatar-inner">
                                <img src="${challenge.avatar}" alt="${challenge.creator}">
                            </div>
                        </div>
                        <div class="challenge-user-info">
                            <div class="challenge-username">${challenge.creator}</div>
                            <span class="challenge-type">Real Challenge</span>
                        </div>
                    </div>
                </div>
                
                <div class="challenge-content">
                    <div class="challenge-title">${challenge.title}</div>
                    <div class="challenge-description">${challenge.description}</div>
                    
                    <div class="challenge-requirements">
                        <div class="requirements-title">üìã What You Need To Do:</div>
                        <ul class="requirements-list">
                            ${challenge.requirements.map(req => `<li>${req}</li>`).join('')}
                        </ul>
                    </div>
                    
                    <div class="challenge-hashtags">
                        ${challenge.hashtags.map(tag => `<span class="challenge-hashtag">${tag}</span>`).join('')}
                    </div>
                    
                    <div class="challenge-reward">
                        <div class="reward-amount">
                            <span>üèÜ</span>
                            <span>${challenge.points} Points</span>
                        </div>
                        <div class="reward-note">
                            ‚è±Ô∏è Estimated time: ${challenge.timeEstimate}<br>
                            üí° ${challenge.tips}
                        </div>
                    </div>
                </div>
                
                <div class="challenge-actions">
                    <button class="challenge-btn btn-accept" onclick="startRealChallenge('${challenge.id}')">
                        üöÄ Accept Challenge
                    </button>
                    <button class="challenge-btn btn-decline" onclick="nextChallenge()">
                        Skip to Next
                    </button>
                </div>
            `;

            return card;
        }

        function updateCurrentChallenge() {
            const cards = document.querySelectorAll('.challenge-card');
            cards.forEach((card, index) => {
                card.className = 'challenge-card';
                if (index === currentPage) {
                    card.classList.add('current');
                }
            });
        }

        function nextChallenge() {
            currentPage = (currentPage + 1) % realChallengeData.length;
            updateCurrentChallenge();
            showToast('‚è≠Ô∏è Next challenge loaded!');
        }

        // ===== CHALLENGE MANAGEMENT =====
        function startRealChallenge(challengeId) {
            const challenge = realChallengeData.find(c => c.id === challengeId);
            if (!challenge) return;
            
            currentActiveChallenge = challenge;
            livePlayerData.currentChallenge = challengeId;
            
            showToast(`üéØ Challenge accepted! Go complete: "${challenge.title}"`, 'success');
            
            // Show completion button after 5 seconds
            setTimeout(() => {
                showToast('üì∏ Ready to submit? Tap the checkmark when you\'re done!', 'warning');
            }, 5000);
        }

        function showSubmissionModal() {
            if (!currentActiveChallenge) {
                showToast('‚ùå No active challenge! Accept a challenge first.', 'warning');
                return;
            }
            
            document.getElementById('submissionModal').classList.add('show');
        }

        function closeSubmission() {
            document.getElementById('submissionModal').classList.remove('show');
            resetSubmissionForm();
        }

        function handleFileUpload(input) {
            const file = input.files[0];
            if (!file) return;
            
            uploadedFile = file;
            const preview = document.getElementById('filePreview');
            const upload = document.querySelector('.file-upload');
            
            preview.textContent = `üìé ${file.name} (${(file.size / 1024 / 1024).toFixed(1)}MB)`;
            preview.style.display = 'block';
            upload.classList.add('has-file');
            
            showToast('‚úÖ File uploaded successfully!', 'success');
        }

        function setRating(rating) {
            selectedRating = rating;
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                if (index < rating) {
                    star.classList.add('active');
                } else {
                    star.classList.remove('active');
                }
            });
        }

        function submitChallenge() {
            const experienceText = document.getElementById('experienceText').value;
            const socialShare = document.getElementById('socialShare').value;
            
            if (!uploadedFile) {
                showToast('üì∑ Please upload a photo or video first!', 'warning');
                return;
            }
            
            if (!experienceText.trim()) {
                showToast('‚úçÔ∏è Please describe your experience!', 'warning');
                return;
            }
            
            if (selectedRating === 0) {
                showToast('‚≠ê Please rate the challenge!', 'warning');
                return;
            }
            
            // Process submission
            const submission = {
                challengeId: currentActiveChallenge.id,
                challengeTitle: currentActiveChallenge.title,
                experience: experienceText,
                rating: selectedRating,
                socialShare: socialShare,
                fileName: uploadedFile.name,
                fileSize: uploadedFile.size,
                submittedAt: Date.now(),
                points: currentActiveChallenge.points
            };
            
            // Add to completed challenges
            completedChallenges.unshift(submission);
            livePlayerData.completedChallenges.push(submission);
            livePlayerData.points += currentActiveChallenge.points;
            
            // Update rank based on points
            updatePlayerRank();
            
            // Save to localStorage
            saveProgress();
            
            // Show success
            showToast(`üéâ Challenge completed! +${currentActiveChallenge.points} points earned!`, 'success');
            
            // Close modal and reset
            closeSubmission();
            currentActiveChallenge = null;
            livePlayerData.currentChallenge = null;
            
            // Update display
            updatePlayerDisplay();
            nextChallenge();
            
            // Log completion
            console.log('‚úÖ Challenge Completed:', submission);
            
            // Handle social sharing if selected
            if (socialShare) {
                handleSocialShare(socialShare, submission);
            }
        }

        function resetSubmissionForm() {
            selectedRating = 0;
            uploadedFile = null;
            document.querySelectorAll('.star').forEach(star => star.classList.remove('active'));
            document.getElementById('experienceText').value = '';
            document.getElementById('socialShare').value = '';
            document.getElementById('filePreview').style.display = 'none';
            document.querySelector('.file-upload').classList.remove('has-file');
        }

        function handleSocialShare(platform, submission) {
            const shareText = `Just completed "${submission.challengeTitle}" on JomBro! üéâ ${submission.experience.substring(0, 100)}...`;
            const shareUrl = window.location.href;
            
            let shareLink = '';
            switch(platform) {
                case 'instagram':
                    showToast('üì± Opening Instagram... Share your photo to your story!', 'success');
                    // Instagram doesn't support direct web sharing, so just notify user
                    break;
                case 'whatsapp':
                    shareLink = `https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareUrl)}`;
                    window.open(shareLink, '_blank');
                    break;
                case 'facebook':
                    shareLink = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}&quote=${encodeURIComponent(shareText)}`;
                    window.open(shareLink, '_blank');
                    break;
            }
        }

        // ===== PLAYER MANAGEMENT =====
        function updatePlayerDisplay() {
            document.getElementById('pointAmount').textContent = livePlayerData.points.toLocaleString();
            document.getElementById('playerRank').textContent = livePlayerData.rank;
        }

        function updatePlayerRank() {
            const points = livePlayerData.points;
            if (points >= 1000) {
                livePlayerData.rank = 'Challenge Master';
            } else if (points >= 500) {
                livePlayerData.rank = 'Challenge Veteran';
            } else if (points >= 200) {
                livePlayerData.rank = 'Challenge Warrior';
            } else if (points >= 100) {
                livePlayerData.rank = 'Challenge Rookie';
            } else {
                livePlayerData.rank = 'Challenge Explorer';
            }
        }

        // ===== COMPLETED CHALLENGES FEED =====
        function showCompletedFeed() {
            if (completedChallenges.length === 0) {
                showToast('üí™ No completed challenges yet! Start your first one!', 'warning');
                return;
            }
            
            const modal = document.createElement('div');
            modal.className = 'submission-modal show';
            modal.innerHTML = `
                <div class="submission-content" style="max-width: 500px;">
                    <div class="submission-title">üèÜ Your Completed Challenges</div>
                    
                    <div style="max-height: 400px; overflow-y: auto;">
                        ${completedChallenges.map(challenge => `
                            <div class="feed-item">
                                <div class="feed-avatar">‚úÖ</div>
                                <div class="feed-content">
                                    <div class="feed-challenge">${challenge.challengeTitle}</div>
                                    <div class="feed-description">${challenge.experience.substring(0, 150)}${challenge.experience.length > 150 ? '...' : ''}</div>
                                    <div class="feed-meta">
                                        <span class="feed-points">+${challenge.points} points</span>
                                        <span>‚≠ê ${challenge.rating}/5</span>
                                        <span>${new Date(challenge.submittedAt).toLocaleDateString()}</span>
                                    </div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    
                    <button class="submit-btn" onclick="this.closest('.submission-modal').remove()" style="margin-top: 20px;">
                        Close
                    </button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showLiveInfo() {
            const modal = document.createElement('div');
            modal.className = 'submission-modal show';
            modal.innerHTML = `
                <div class="submission-content">
                    <div class="submission-title">üî¥ Live Challenges Info</div>
                    <div style="text-align: left; line-height: 1.6;">
                        <h4 style="color: var(--live-primary); margin-bottom: 10px;">How It Works:</h4>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>Accept real challenges you can do today</li>
                            <li>Complete the activity in real life</li>
                            <li>Submit photo/video evidence</li>
                            <li>Earn points and build your rank</li>
                        </ul>
                        
                        <h4 style="color: var(--live-primary); margin-bottom: 10px;">What Makes This Special:</h4>
                        <ul style="margin-left: 20px; margin-bottom: 15px;">
                            <li>Real activities, real experiences</li>
                            <li>No payments required - just participation</li>
                            <li>Build confidence and try new things</li>
                            <li>Connect with your community</li>
                        </ul>
                        
                        <div style="background: rgba(255, 71, 87, 0.1); padding: 12px; border-radius: 8px; margin-top: 15px;">
                            <strong>Remember:</strong> Be safe, be respectful, and have fun! All challenges are designed to be positive experiences.
                        </div>
                    </div>
                    <button class="submit-btn" onclick="this.closest('.submission-modal').remove()">Got it!</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // ===== NAVIGATION =====
        function navAction(element, section) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            element.classList.add('active');
            
            switch(section) {
                case 'home':
                    showToast('üè† Home');
                    break;
                case 'challenges':
                    nextChallenge();
                    break;
                case 'completed':
                    if (currentActiveChallenge) {
                        showSubmissionModal();
                    } else {
                        showCompletedFeed();
                    }
                    break;
                case 'leaderboard':
                    showLeaderboard();
                    break;
                case 'profile':
                    showProfile();
                    break;
            }
        }

        function showLeaderboard() {
            const modal = document.createElement('div');
            modal.className = 'submission-modal show';
            modal.innerHTML = `
                <div class="submission-content">
                    <div class="submission-title">üèÜ Your Progress</div>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 48px; margin-bottom: 15px;">üèÜ</div>
                        <div style="font-size: 24px; font-weight: bold; color: var(--live-primary); margin-bottom: 10px;">
                            ${livePlayerData.points.toLocaleString()} Points
                        </div>
                        <div style="font-size: 18px; color: var(--text-secondary); margin-bottom: 20px;">
                            Rank: ${livePlayerData.rank}
                        </div>
                        <div style="background: rgba(46, 213, 115, 0.1); padding: 15px; border-radius: 12px;">
                            <div style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">
                                ${completedChallenges.length} Challenges Completed
                            </div>
                            <div style="font-size: 14px; color: var(--text-secondary);">
                                Average rating: ${completedChallenges.length > 0 ? (completedChallenges.reduce((sum, c) => sum + c.rating, 0) / completedChallenges.length).toFixed(1) : 'N/A'}/5
                            </div>
                        </div>
                    </div>
                    <button class="submit-btn" onclick="this.closest('.submission-modal').remove()">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function showProfile() {
            const modal = document.createElement('div');
            modal.className = 'submission-modal show';
            modal.innerHTML = `
                <div class="submission-content">
                    <div class="submission-title">üë§ Your Profile</div>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 60px; margin-bottom: 15px;">üë§</div>
                        <div style="font-size: 20px; font-weight: bold; margin-bottom: 5px;">
                            ${livePlayerData.displayName}
                        </div>
                        <div style="font-size: 14px; color: var(--live-primary); margin-bottom: 20px;">
                            ${livePlayerData.rank}
                        </div>
                        
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin: 20px 0;">
                            <div style="background: rgba(255, 71, 87, 0.1); padding: 15px; border-radius: 12px;">
                                <div style="font-size: 20px; font-weight: bold; color: var(--live-primary);">
                                    ${livePlayerData.points}
                                </div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Total Points</div>
                            </div>
                            <div style="background: rgba(46, 213, 115, 0.1); padding: 15px; border-radius: 12px;">
                                <div style="font-size: 20px; font-weight: bold; color: var(--live-success);">
                                    ${completedChallenges.length}
                                </div>
                                <div style="font-size: 12px; color: var(--text-secondary);">Completed</div>
                            </div>
                        </div>
                        
                        <div style="background: rgba(55, 66, 250, 0.1); padding: 15px; border-radius: 12px; margin-top: 15px;">
                            <div style="font-size: 14px; color: var(--text-secondary);">
                                Member since: ${new Date().toLocaleDateString()}
                            </div>
                        </div>
                    </div>
                    <button class="submit-btn" onclick="this.closest('.submission-modal').remove()">Close</button>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function shareChallenge() {
            if (navigator.share) {
                navigator.share({
                    title: 'JomBro Live Challenges',
                    text: 'Join me on JomBro! Complete real-world challenges and earn points while having fun!',
                    url: window.location.href
                }).then(() => {
                    showToast('üì§ Shared successfully!', 'success');
                }).catch(() => {
                    fallbackShare();
                });
            } else {
                fallbackShare();
            }
        }

        function fallbackShare() {
            const shareText = 'Join me on JomBro! Complete real-world challenges and earn points while having fun! ' + window.location.href;
            navigator.clipboard.writeText(shareText).then(() => {
                showToast('üìã Share link copied to clipboard!', 'success');
            }).catch(() => {
                showToast('üì§ Share feature not available', 'warning');
            });
        }

        // ===== UTILITY FUNCTIONS =====
        function showToast(message, type = 'info') {
            const toast = document.getElementById('toast');
            const toastText = document.getElementById('toastText');
            
            toastText.textContent = message;
            toast.className = `toast ${type}`;
            toast.classList.add('show');
            
            setTimeout(() => toast.classList.remove('show'), 4000);
        }

        function saveProgress() {
            localStorage.setItem('jombro_live_player', JSON.stringify(livePlayerData));
            localStorage.setItem('jombro_completed_challenges', JSON.stringify(completedChallenges));
        }

        function loadCompletedChallenges() {
            try {
                const savedPlayer = localStorage.getItem('jombro_live_player');
                const savedChallenges = localStorage.getItem('jombro_completed_challenges');
                
                if (savedPlayer) {
                    const playerData = JSON.parse(savedPlayer);
                    livePlayerData = { ...livePlayerData, ...playerData };
                }
                
                if (savedChallenges) {
                    completedChallenges = JSON.parse(savedChallenges);
                }
                
                updatePlayerDisplay();
            } catch (error) {
                console.error('Error loading saved progress:', error);
            }
        }

        // ===== TOUCH/SWIPE HANDLING =====
        let startY = 0;
        let startX = 0;

        document.addEventListener('touchstart', (e) => {
            if (e.target.closest('.submission-modal')) return;
            startY = e.touches[0].clientY;
            startX = e.touches[0].clientX;
        }, { passive: true });

        document.addEventListener('touchend', (e) => {
            if (!startY || !startX) return;
            if (e.target.closest('.submission-modal')) return;

            const endY = e.changedTouches[0].clientY;
            const deltaY = startY - endY;

            if (Math.abs(deltaY) > 50) {
                if (e.target.closest('.content-area')) {
                    if (deltaY > 0) {
                        nextChallenge();
                    }
                }
            }

            startY = 0;
            startX = 0;
        }, { passive: true });

        // ===== AUTO-SAVE =====
        setInterval(() => {
            saveProgress();
        }, 30000);

        // Initialize on load
        console.log('‚úÖ JomBro Live Challenges Ready');
        console.log('üî¥ Real challenges enabled');
        console.log('üèÜ Points system active');
        console.log('üì∏ Photo submission ready');
    </script>
</body>
</html>
